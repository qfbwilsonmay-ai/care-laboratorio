<!DOCTYPE html>
<html>
<head>
    <title>Administrar Pruebas - CARE</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { padding: 10px; border: 1px solid #ccc; text-align: left; }
        input, select { width: 100%; padding: 8px; margin: 5px 0; }
        button { padding: 8px 12px; margin: 2px; cursor: pointer; }
        .btn-guardar { background: #28a745; color: white; border: none; }
        .btn-eliminar { background: #d9534f; color: white; border: none; }
        .btn { background: #007bff; color: white; padding: 8px 16px; text-decoration: none; margin: 5px; }
    </style>
</head>
<body>
    <h1>Administrar Pruebas Clínicas</h1>
    <a href="/" class="btn">← Inicio</a>
    <a href="/admin/precios" class="btn">Administrar Precios</a>

    <form method="POST" id="formPruebas">
        <table id="tablaPruebas">
            <tr>
                <th>Clave</th>
                <th>Nombre</th>
                <th>Tipo Muestra</th>
                <th>Contenedor</th>
                <th>Unidad</th>
                <th>Valores Normales</th>
                <th>Acciones</th>
            </tr>
            {% for p in pruebas %}
            <tr>
                <td><input type="text" name="clave_{{ loop.index }}" value="{{ p.clave }}" required></td>
                <td><input type="text" name="nombre_{{ loop.index }}" value="{{ p.nombre }}" required></td>
                <td><input type="text" name="tipo_muestra_{{ loop.index }}" value="{{ p.tipo_muestra }}" required></td>
                <td>
                    <select name="id_contenedor_{{ loop.index }}" required>
                        {% for c in contenedores %}
                        <option value="{{ c.id }}" {% if c.id == p.id_contenedor %}selected{% endif %}>{{ c.nombre }}</option>
                        {% endfor %}
                    </select>
                </td>
                <td><input type="text" name="unidad_{{ loop.index }}" value="{{ p.unidad }}" required></td>
                <td><input type="text" name="valores_normales_{{ loop.index }}" value="{{ p.valores_normales }}" required></td>
                <td>
                    <button type="button" class="btn-eliminar" onclick="eliminarFila(this)">Eliminar</button>
                </td>
            </tr>
            {% endfor %}
        </table>
        <button type="submit" class="btn-guardar">Guardar Todas las Pruebas</button>
    </form>

    <script>
        function eliminarFila(btn) {
            if (confirm('¿Seguro que deseas eliminar esta prueba?')) {
                const fila = btn.closest('tr');
                fila.remove();
            }
        }
    </script>
</body>
</html>